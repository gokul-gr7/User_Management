<%= render 'shared/navbar' %>

<div class="container mt-5">
  <div class="pricing-header p-3 pb-md-4 mx-auto text-center">
    <h1 class="display-4 fw-normal text-body-emphasis">Welcome</h1>
    <p class="fs-5 text-body-secondary">This is a Simple user Management project</p>
  </div>

  <div class="row justify-content-center mb-5">
    <div class="col-md-6 text-center">
      <%= link_to user_details_path, class: "btn btn-primary btn-lg btn-block mb-3" do %>
        Add User
      <% end %>

      <%= form_tag(search_path, method: :get, class: "search-form") do %>
        <div class="input-group">
          <%= text_field_tag(:query, params[:query], class: "form-control", placeholder: "Enter id to search") %>
           <%= text_field_tag(:column_name, params[:column_name], class: "form-control", placeholder: "Enter column name") %>
          <button type="submit" class="btn btn-primary">Search</button>
        </div>
      <% end %>
    </div>
  </div>

  <% if @results.any? %>
    <div class="table-responsive">
      <table class="table table-bordered">
        <thead>
          <tr>
              <% params[:column_name].split(',').each do |column_name| %>
              <th><%= column_name.strip.titleize %></th>
            <% end %>
          </tr>
        </thead>
        <tbody>
          <% @results.each do |result| %>
            <tr>
              <% params[:column_name].split(',').each do |column_name| %>
                <td><%= result[column_name.strip].first %></td>
              <% end %>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

  <% else %>
  <% end %>
</div>
